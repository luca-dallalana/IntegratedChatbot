<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartInvest AI Advisor</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/default.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f0f2f5;
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .header {
            text-align: center;
            margin-bottom: 3rem;
            color: #333;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            color: #1a1a1a;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .investment-types {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
        }

        .investment-card {
            background: #fff;
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .investment-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 20px rgba(0, 0, 0, 0.1);
        }

        .investment-card h3 {
            color: #007bff;
            margin-bottom: 1rem;
            font-size: 1.3rem;
        }

        .investment-card .returns {
            font-size: 1.8rem;
            color: #333;
            font-weight: bold;
            margin: 0.5rem 0;
        }

        .investment-card .risk-badge {
            display: inline-block;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .risk-low {
            background: #d4f1d4;
            color: #2e7d2e;
        }

        .risk-medium {
            background: #fff3cd;
            color: #856404;
        }

        .risk-high {
            background: #f8d7da;
            color: #721c24;
        }

        .investment-card ul {
            list-style: none;
            margin-top: 1rem;
        }

        .investment-card li {
            padding: 0.4rem 0;
            font-size: 0.9rem;
            border-bottom: 1px solid #eee;
        }

        .investment-card li:last-child {
            border-bottom: none;
        }

        .chat-container {
            background: #fff;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            height: 600px;
            display: flex;
            flex-direction: column;
        }

        .chat-header {
            background: #007bff;
            color: white;
            padding: 1.5rem;
            text-align: center;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 2rem;
            background: #f8f9fa;
        }

        .message {
            margin-bottom: 1.5rem;
            display: flex;
            align-items: flex-start;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.user {
            justify-content: flex-end;
        }

        .message-content {
            max-width: 70%;
            padding: 1rem 1.5rem;
            border-radius: 15px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
            line-height: 1.6;
        }

        .message.bot .message-content {
            background: #e9e9eb;
            border-bottom-left-radius: 5px;
        }

        .message.user .message-content {
            background: #007bff;
            color: white;
            border-bottom-right-radius: 5px;
        }

        .chat-input {
            padding: 1.5rem;
            background: white;
            border-top: 1px solid #e0e0e0;
        }

        .input-form {
            display: flex;
            gap: 1rem;
        }

        .input-form input {
            flex: 1;
            padding: 1rem;
            border: 2px solid #e0e0e0;
            border-radius: 25px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .input-form input:focus {
            outline: none;
            border-color: #007bff;
        }

        .input-form button {
            padding: 1rem 2rem;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .input-form button:hover {
            background-color: #0056b3;
        }

        .api-key-section {
            background: #fff;
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .api-key-section h3 {
            color: #007bff;
            margin-bottom: 1rem;
        }

        .api-key-input {
            display: flex;
            gap: 1rem;
            margin-bottom: 0.5rem;
        }

        .api-key-input input {
            flex: 1;
            padding: 0.75rem;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-family: monospace;
        }

        .api-key-input button {
            padding: 0.75rem 1.5rem;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>SmartInvest AI Advisor</h1>
            <p>Your AI-powered investment consultant - Build wealth intelligently!</p>
        </div>

        <div class="api-key-section">
            <h3>OpenAI API Configuration</h3>
            <div class="api-key-input">
                <input type="password" id="apiKey" placeholder="Enter your OpenAI API key (sk-...)">
                <button onclick="saveApiKey()">Save Key</button>
            </div>
            <div id="apiKeyStatus" style="margin-top: 10px;"></div>
        </div>

        <div class="investment-types">
            <div class="investment-card">
                <h3>üìä Stocks & ETFs</h3>
                <div class="returns">8-12% Avg.</div>
                <span class="risk-badge risk-medium">Medium Risk</span>
                <ul>
                    <li>‚úì Diversified portfolios</li>
                    <li>‚úì Index funds (S&P 500, NASDAQ)</li>
                    <li>‚úì Sector-specific ETFs</li>
                </ul>
            </div>

            <div class="investment-card">
                <h3>ü™ô Cryptocurrency</h3>
                <div class="returns">Variable</div>
                <span class="risk-badge risk-high">High Risk</span>
                <ul>
                    <li>‚úì Bitcoin, Ethereum, Altcoins</li>
                    <li>‚úì DeFi opportunities</li>
                    <li>‚úì Staking rewards: 4-20% APY</li>
                </ul>
            </div>

            <div class="investment-card">
                <h3>üìú Bonds</h3>
                <div class="returns">3-5% Yield</div>
                <span class="risk-badge risk-low">Low Risk</span>
                <ul>
                    <li>‚úì Government bonds</li>
                    <li>‚úì Corporate bonds</li>
                    <li>‚úì Municipal bonds (tax-free)</li>
                </ul>
            </div>

            <div class="investment-card">
                <h3>üè¶ REITs</h3>
                <div class="returns">6-10% Yield</div>
                <span class="risk-badge risk-medium">Medium Risk</span>
                <ul>
                    <li>‚úì Real estate exposure</li>
                    <li>‚úì Monthly dividends available</li>
                    <li>‚úì Commercial & residential</li>
                </ul>
            </div>
        </div>

        <div class="chat-container">
            <div class="chat-header">
                <h2>Chat with Your Investment Advisor</h2>
            </div>

            <div class="chat-messages" id="chatMessages">
                <div class="message bot">
                    <div class="message-content">
                        Hello! I'm your SmartInvest AI Advisor. How can I help you with your investments today?
                    </div>
                </div>
            </div>

            <div class="chat-input">
                <form class="input-form" onsubmit="sendMessage(event)">
                    <input type="text" id="userInput" placeholder="Ask about stocks, crypto, ETFs, bonds..." autocomplete="off">
                    <button type="submit" id="sendButton">Send</button>
                </form>
            </div>
        </div>
    </div>

    <script>
        const systemPrompt = `You are an expert investment advisor AI assistant for SmartInvest. Your role is to help clients understand various investment options including stocks, ETFs, cryptocurrency, bonds, REITs, and other investment vehicles.

IMPORTANT INSTRUCTIONS:
- Keep responses concise and conversational.
- Use markdown for formatting.
- Never provide specific financial advice or guarantee returns.
- Always include appropriate risk disclaimers.`;

        let apiKey = localStorage.getItem('openai_api_key') || '';
        let conversationHistory = [
            { role: 'system', content: systemPrompt }
        ];

        window.addEventListener('DOMContentLoaded', function() {
            if (apiKey) {
                document.getElementById('apiKeyStatus').textContent = 'API key loaded from storage.';
            } else {
                document.getElementById('apiKeyStatus').textContent = 'Please enter your OpenAI API key.';
            }
        });

        function saveApiKey() {
            const keyInput = document.getElementById('apiKey');
            if (keyInput.value.trim()) {
                apiKey = keyInput.value.trim();
                localStorage.setItem('openai_api_key', apiKey);
                document.getElementById('apiKeyStatus').textContent = 'API key saved successfully!';
            } else {
                document.getElementById('apiKeyStatus').textContent = 'Please enter a valid API key.';
            }
        }

        async function sendMessage(event) {
            event.preventDefault();
            
            if (!apiKey) {
                alert('Please enter your OpenAI API key first');
                return;
            }

            const input = document.getElementById('userInput');
            const message = input.value.trim();
            
            if (!message) return;

            addMessage(message, 'user');
            input.value = '';

            conversationHistory.push({ role: 'user', content: message });

            try {
                const response = await fetch('https://api.openai.com/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${apiKey}`
                    },
                    body: JSON.stringify({
                        model: 'gpt-4o-mini',
                        messages: conversationHistory,
                        temperature: 0.7,
                        max_tokens: 400
                    })
                });

                if (!response.ok) {
                    throw new Error(`API request failed: ${response.status}`);
                }

                const data = await response.json();
                const botResponse = data.choices[0].message.content;
                
                conversationHistory.push({ role: 'assistant', content: botResponse });
                addMessage(botResponse, 'bot');

            } catch (error) {
                console.error('Error:', error);
                addMessage(`An error occurred: ${error.message}`, 'bot');
            }
        }

        function addMessage(text, sender) {
            const messagesContainer = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            
            const contentDiv = document.createElement('div');
            contentDiv.className = 'message-content';
            
            if (sender === 'bot') {
                contentDiv.innerHTML = marked.parse(text);
                hljs.highlightAll();
            } else {
                contentDiv.textContent = text;
            }
            
            messageDiv.appendChild(contentDiv);
            messagesContainer.appendChild(messageDiv);
            
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }
    </script>
</body>
</html>